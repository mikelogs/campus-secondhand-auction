{"remainingRequest":"C:\\Users\\坤\\Desktop\\校园二手交易平台\\校园二手交易平台\\代码\\前端\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\坤\\Desktop\\校园二手交易平台\\校园二手交易平台\\代码\\前端\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\坤\\Desktop\\校园二手交易平台\\校园二手交易平台\\代码\\前端\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\坤\\Desktop\\校园二手交易平台\\校园二手交易平台\\代码\\前端\\frontend\\src\\components\\common\\AppHeader.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\坤\\Desktop\\校园二手交易平台\\校园二手交易平台\\代码\\前端\\frontend\\src\\components\\common\\AppHeader.vue","mtime":1678197338000},{"path":"C:\\Users\\坤\\Desktop\\校园二手交易平台\\校园二手交易平台\\代码\\前端\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678197338000},{"path":"C:\\Users\\坤\\Desktop\\校园二手交易平台\\校园二手交易平台\\代码\\前端\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1678197338000},{"path":"C:\\Users\\坤\\Desktop\\校园二手交易平台\\校园二手交易平台\\代码\\前端\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678197338000},{"path":"C:\\Users\\坤\\Desktop\\校园二手交易平台\\校园二手交易平台\\代码\\前端\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1678197338000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.replace\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  name: 'Header',\n  props: ['searchInput', 'nicknameValue', 'avatarValue'],\n  data: function data() {\n    return {\n      searchValue: this.searchInput,\n      nickname: '登录',\n      avatar: 'https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png',\n      isLogin: false\n    };\n  },\n  created: function created() {\n    var _this = this;\n\n    // console.log(\"header\");\n    if (!this.$globalData.userInfo.nickname) {\n      this.$api.getUserInfo().then(function (res) {\n        console.log('Header getUserInfo:', res);\n\n        if (res.status_code === 1) {\n          _this.nickname = res.data.nickname;\n          _this.avatar = res.data.avatar;\n          res.data.signInTime = res.data.signInTime.substring(0, 10);\n          _this.$globalData.userInfo = res.data;\n          _this.isLogin = true;\n        }\n      });\n    } else {\n      this.nickname = this.$globalData.userInfo.nickname;\n      this.avatar = this.$globalData.userInfo.avatar;\n      this.isLogin = true;\n    }\n  },\n  methods: {\n    searchIdle: function searchIdle() {\n      if ('/search' !== this.$route.path) {\n        this.$router.push({\n          path: '/search',\n          query: {\n            searchValue: this.searchValue\n          }\n        });\n      } else {\n        this.$router.replace({\n          path: '/search',\n          query: {\n            searchValue: this.searchValue\n          }\n        });\n        this.$router.go(0);\n      }\n    },\n    toMe: function toMe() {\n      if ('/me' !== this.$route.path) {\n        this.$router.push({\n          path: '/me'\n        });\n      }\n    },\n    toMessage: function toMessage() {\n      if ('/message' !== this.$route.path) {\n        this.$router.push({\n          path: '/message'\n        });\n      }\n    },\n    toRelease: function toRelease() {\n      if ('/release' !== this.$route.path) {\n        this.$router.push({\n          path: '/release'\n        });\n      }\n    },\n    loginOut: function loginOut() {\n      var _this2 = this;\n\n      this.$api.logout().then(function (res) {\n        if (res.status_code === 1) {\n          _this2.$globalData.userInfo = {};\n          console.log(\"login out\");\n\n          if ('/index' === _this2.$route.path) {\n            _this2.$router.go(0);\n          } else {\n            _this2.$router.push({\n              path: '/index'\n            });\n          }\n        } else {\n          _this2.$message.error('网络或系统异常，退出登录失败！');\n        }\n      });\n    }\n  }\n};",{"version":3,"sources":["AppHeader.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <div class=\"header\">\n        <div class=\"header-container\">\n            <div class=\"app-name\">\n                <router-link to=\"/\">校园二手闲置物品交易平台</router-link>\n            </div>\n            <div class=\"search-container\">\n                <!-- 按回车触发函数  @keyup.enter.native -->\n                <el-input placeholder=\"搜闲置...\" v-model=\"searchValue\" @keyup.enter.native=\"searchIdle\">\n                    <el-button slot=\"append\" icon=\"el-icon-search\" @click=\"searchIdle\"></el-button>\n                </el-input>\n            </div>\n            <el-button type=\"primary\" icon=\"el-icon-plus\"  @click=\"toRelease\">发布闲置/公告</el-button>\n            <el-button type=\"primary\" icon=\"el-icon-chat-dot-round\" @click=\"toMessage\">消息</el-button>\n            <router-link v-if=\"!isLogin\" class=\"user-name-text\" to=\"/login\">登录</router-link>\n            <el-dropdown trigger=\"click\" v-else>\n                <div style=\"cursor:pointer;display: flex;align-items: center;\">\n                    <div style=\"font-size: 16px;color: #409EFF;padding-right: 5px;\">{{nicknameValue?nicknameValue:nickname}}</div>\n                    <el-avatar :src=\"avatarValue?avatarValue:avatar\"></el-avatar>\n                </div>\n                <el-dropdown-menu slot=\"dropdown\">\n                    <el-dropdown-item><div @click=\"toMe\">个人中心</div></el-dropdown-item>\n                    <el-dropdown-item divided style=\"color: red;\"><div @click=\"loginOut\">退出登录</div></el-dropdown-item>\n                </el-dropdown-menu>\n            </el-dropdown>\n        </div>\n    </div>\n</template>\n<script>\n\n    export default {\n        name: 'Header',\n        props: ['searchInput','nicknameValue','avatarValue'],\n        data() {\n            return {\n                searchValue: this.searchInput,\n                nickname:'登录',\n                avatar:'https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png',\n                isLogin:false\n            };\n        },\n        created(){\n            // console.log(\"header\");\n            if(! this.$globalData.userInfo.nickname){\n                this.$api.getUserInfo().then(res=>{\n                    console.log('Header getUserInfo:',res);\n                    if(res.status_code===1){\n                        this.nickname=res.data.nickname;\n                        this.avatar=res.data.avatar;\n                        res.data.signInTime=res.data.signInTime.substring(0,10);\n                        this.$globalData.userInfo=res.data;\n                        this.isLogin=true;\n                    }\n                })\n            }else {\n                this.nickname=this.$globalData.userInfo.nickname;\n                this.avatar=this.$globalData.userInfo.avatar;\n                this.isLogin=true;\n            }\n        },\n        methods: {\n            searchIdle() {\n                if ('/search' !== this.$route.path) {\n                    this.$router.push({path: '/search', query: {searchValue: this.searchValue}});\n                } else {\n                    this.$router.replace({path: '/search', query: {searchValue: this.searchValue}});\n                    this.$router.go(0);\n                }\n\n            },\n            toMe() {\n                if ('/me' !== this.$route.path) {\n                    this.$router.push({path: '/me'});\n                }\n            },\n            toMessage(){\n                if ('/message' !== this.$route.path) {\n                    this.$router.push({path: '/message'});\n                }\n            },\n            toRelease(){\n                if ('/release' !== this.$route.path) {\n                    this.$router.push({path: '/release'});\n                }\n            },\n            loginOut(){\n                this.$api.logout().then(res=>{\n                    if(res.status_code===1){\n                        this.$globalData.userInfo={};\n                        console.log(\"login out\");\n                        if ('/index' === this.$route.path) {\n                            this.$router.go(0);\n                        }else {\n                            this.$router.push({path: '/index'});\n                        }\n                    }else {\n                        this.$message.error('网络或系统异常，退出登录失败！');\n                    }\n                });\n\n            }\n        }\n    };\n</script>\n<style scoped>\n    .header {\n        position: fixed;\n        top: 0;\n        left: 0;\n        right: 0;\n        width: 100%;\n        height: 58px;\n        background: #ffffff;\n        display: flex;\n        justify-content: center;\n        border-bottom: #eeeeee solid 2px;\n        z-index: 1000;\n    }\n\n    .header-container {\n        width: 1000px;\n        height: 100%;\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n    }\n\n    .app-name a {\n        color: #409EFF;\n        font-size: 24px;\n        text-decoration: none;\n    }\n\n    .search-container {\n        width: 300px;\n    }\n    .user-name-text{\n        font-size: 16px;\n        font-weight: 600;\n        color: #409EFF;\n        cursor: pointer;\n        text-decoration: none;\n    }\n</style>\n"],"sourceRoot":"src/components/common"}]}