{"remainingRequest":"E:\\project\\secondhandShop\\leave unused-goods-trading-platform -front\\node_modules\\babel-loader\\lib\\index.js!E:\\project\\secondhandShop\\leave unused-goods-trading-platform -front\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\project\\secondhandShop\\leave unused-goods-trading-platform -front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\project\\secondhandShop\\leave unused-goods-trading-platform -front\\src\\components\\page\\alipay.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\project\\secondhandShop\\leave unused-goods-trading-platform -front\\src\\components\\page\\alipay.vue","mtime":1651282796847},{"path":"E:\\project\\secondhandShop\\leave unused-goods-trading-platform -front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1645787918793},{"path":"E:\\project\\secondhandShop\\leave unused-goods-trading-platform -front\\node_modules\\babel-loader\\lib\\index.js","mtime":1645787919664},{"path":"E:\\project\\secondhandShop\\leave unused-goods-trading-platform -front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1645787918793},{"path":"E:\\project\\secondhandShop\\leave unused-goods-trading-platform -front\\node_modules\\vue-loader\\lib\\index.js","mtime":1645787910416}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport AppHead from \"../common/AppHeader.vue\";\nimport AppBody from \"../common/AppPageBody.vue\";\nimport AppFoot from \"../common/AppFoot.vue\";\nimport vueQr from 'vue-qr';\nexport default {\n  name: \"alipay\",\n  data: function data() {\n    return {\n      dialogVisible: false,\n      text: \"\",\n      paySucc: false\n    };\n  },\n  components: {\n    vueQr: vueQr,\n    AppHead: AppHead,\n    AppBody: AppBody,\n    AppFoot: AppFoot\n  },\n  methods: {\n    pay: function pay() {\n      var _this = this;\n\n      _this.paySucc = false;\n      _this.dialogVisible = true;\n      this.axios.request(\"http://localhost:8081/createQR\").then(function (response) {\n        _this.text = response.data;\n        _this.dialogVisible = true; //使用webSocket发送请求，下面会简单介绍websocket使用\n\n        if (\"WebSocket\" in window) {\n          // 打开一个 web socket\n          var ws = new WebSocket(\"ws://localhost:8081/bindingRecord\");\n\n          ws.onopen = function () {// Web Socket 已连接上，使用 send() 方法发送数据\n            // ws.send(\"data\");\n            // alert(\"数据发送中...\");\n          };\n\n          ws.onmessage = function (evt) {\n            var received_msg = evt.data; // alert(\"数据已接收...\" + evt.data);\n\n            if (Boolean(evt.data)) {\n              _this.paySucc = true;\n              setTimeout(function () {\n                _this.dialogVisible = false;\n              }, 3 * 1000);\n            }\n\n            ws.close();\n          };\n\n          ws.onclose = function () {\n            // // 关闭 websocket\n            console.log(\"连接已关闭...\");\n          };\n        } else {\n          // 浏览器不支持 WebSocket\n          alert(\"您的浏览器不支持 WebSocket!\");\n        }\n      }).catch(function (err) {\n        console.log(err);\n      });\n    },\n    back: function back(dataUrl, id) {\n      console.log(dataUrl, id);\n    }\n  }\n};",{"version":3,"sources":["alipay.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAwBA,OAAA,OAAA;AACA,OAAA,OAAA;AACA,OAAA,OAAA;AACA,OAAA,KAAA,MAAA,QAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,QADA;AACA,EAAA,IADA,kBACA;AAEA,WAAA;AAEA,MAAA,aAAA,EAAA,KAFA;AAIA,MAAA,IAAA,EAAA,EAJA;AAMA,MAAA,OAAA,EAAA;AANA,KAAA;AAUA,GAbA;AAeA,EAAA,UAAA,EAAA;AAEA,IAAA,KAAA,EAAA,KAFA;AAGA,IAAA,OAAA,EAAA,OAHA;AAIA,IAAA,OAAA,EAAA,OAJA;AAKA,IAAA,OAAA,EAAA;AALA,GAfA;AAuBA,EAAA,OAAA,EAAA;AAEA,IAAA,GAFA,iBAEA;AAEA,UAAA,KAAA,GAAA,IAAA;;AAEA,MAAA,KAAA,CAAA,OAAA,GAAA,KAAA;AAEA,MAAA,KAAA,CAAA,aAAA,GAAA,IAAA;AAEA,WAAA,KAAA,CAAA,OAAA,CAAA,gCAAA,EAEA,IAFA,CAEA,UAAA,QAAA,EAAA;AAEA,QAAA,KAAA,CAAA,IAAA,GAAA,QAAA,CAAA,IAAA;AAEA,QAAA,KAAA,CAAA,aAAA,GAAA,IAAA,CAJA,CAMA;;AAEA,YAAA,eAAA,MAAA,EAAA;AAEA;AAEA,cAAA,EAAA,GAAA,IAAA,SAAA,CAAA,mCAAA,CAAA;;AAEA,UAAA,EAAA,CAAA,MAAA,GAAA,YAAA,CAEA;AAEA;AAEA;AAEA,WARA;;AAUA,UAAA,EAAA,CAAA,SAAA,GAAA,UAAA,GAAA,EAAA;AAEA,gBAAA,YAAA,GAAA,GAAA,CAAA,IAAA,CAFA,CAIA;;AAEA,gBAAA,OAAA,CAAA,GAAA,CAAA,IAAA,CAAA,EAAA;AAEA,cAAA,KAAA,CAAA,OAAA,GAAA,IAAA;AAEA,cAAA,UAAA,CAAA,YAAA;AAEA,gBAAA,KAAA,CAAA,aAAA,GAAA,KAAA;AAEA,eAJA,EAIA,IAAA,IAJA,CAAA;AAMA;;AAEA,YAAA,EAAA,CAAA,KAAA;AAEA,WApBA;;AAsBA,UAAA,EAAA,CAAA,OAAA,GAAA,YAAA;AAEA;AAEA,YAAA,OAAA,CAAA,GAAA,CAAA,UAAA;AAEA,WANA;AAQA,SA9CA,MA8CA;AAEA;AAEA,UAAA,KAAA,CAAA,qBAAA,CAAA;AAEA;AAEA,OAhEA,EAgEA,KAhEA,CAgEA,UAAA,GAAA,EAAA;AAEA,QAAA,OAAA,CAAA,GAAA,CAAA,GAAA;AAEA,OApEA;AAsEA,KAhFA;AAkFA,IAAA,IAlFA,gBAkFA,OAlFA,EAkFA,EAlFA,EAkFA;AAEA,MAAA,OAAA,CAAA,GAAA,CAAA,OAAA,EAAA,EAAA;AAEA;AAtFA;AAvBA,CAAA","sourcesContent":["<template>\r\n\t<div>\r\n\r\n\t\t<!-- 支付按钮，模拟支付操作 -->\r\n\r\n\t\t<van-button type=\"primary\" @click=\"pay\">支付</van-button>\r\n\r\n\t\t<el-dialog :title=\"paySucc?'支付成功':'扫码支付'\" :visible.sync=\"dialogVisible\" width=\"16%\" center>\r\n\r\n\t\t\t<!-- 生成二维码图片 -->\r\n\r\n\t\t\t<vueQr :text=\"text\" :size=\"200\" v-if=\"!paySucc\"></vueQr>\r\n\r\n\t\t\t<!-- 使用websocket监控是否扫描，扫描成功显示成功并退出界面 -->\r\n\r\n\t\t\t<span class=\"iconfont icon-success\" style=\"position: relative;font-size: 100px;color:#42B983;margin-left: 50px;top:-10px;\" v-else></span>\r\n\r\n\t\t</el-dialog>\r\n\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\r\n    import AppHead from '../common/AppHeader.vue';\r\n    import AppBody from '../common/AppPageBody.vue'\r\n    import AppFoot from '../common/AppFoot.vue'\r\n    import vueQr from 'vue-qr'\r\n\r\n    export default {\r\n        name: \"alipay\",data() {\r\n\r\n            return {\r\n\r\n                dialogVisible: false,\r\n\r\n                text: \"\",\r\n\r\n                paySucc: false\r\n\r\n            }\r\n\r\n        },\r\n\r\n        components: {\r\n\r\n            vueQr,\r\n            AppHead,\r\n            AppBody,\r\n            AppFoot\r\n        },\r\n\r\n        methods: {\r\n\r\n            pay() {\r\n\r\n                let _this = this;\r\n\r\n                _this.paySucc = false;\r\n\r\n                _this.dialogVisible = true;\r\n\r\n                this.axios.request(\"http://localhost:8081/createQR\")\r\n\r\n                    .then((response) => {\r\n\r\n                        _this.text = response.data;\r\n\r\n                        _this.dialogVisible = true;\r\n\r\n                        //使用webSocket发送请求，下面会简单介绍websocket使用\r\n\r\n                        if (\"WebSocket\" in window) {\r\n\r\n                            // 打开一个 web socket\r\n\r\n                            var ws = new WebSocket(\"ws://localhost:8081/bindingRecord\");\r\n\r\n                            ws.onopen = function() {\r\n\r\n                                // Web Socket 已连接上，使用 send() 方法发送数据\r\n\r\n                                // ws.send(\"data\");\r\n\r\n                                // alert(\"数据发送中...\");\r\n\r\n                            };\r\n\r\n                            ws.onmessage = function(evt) {\r\n\r\n                                var received_msg = evt.data;\r\n\r\n                                // alert(\"数据已接收...\" + evt.data);\r\n\r\n                                if (Boolean(evt.data)) {\r\n\r\n                                    _this.paySucc = true;\r\n\r\n                                    setTimeout(() => {\r\n\r\n                                        _this.dialogVisible = false;\r\n\r\n                                    }, 3 * 1000);\r\n\r\n                                }\r\n\r\n                                ws.close();\r\n\r\n                            };\r\n\r\n                            ws.onclose = function() {\r\n\r\n                                // // 关闭 websocket\r\n\r\n                                console.log(\"连接已关闭...\");\r\n\r\n                            };\r\n\r\n                        } else {\r\n\r\n                            // 浏览器不支持 WebSocket\r\n\r\n                            alert(\"您的浏览器不支持 WebSocket!\");\r\n\r\n                        }\r\n\r\n                    }).catch((err) => {\r\n\r\n                    console.log(err)\r\n\r\n                })\r\n\r\n            },\r\n\r\n            back(dataUrl, id) {\r\n\r\n                console.log(dataUrl, id)\r\n\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"],"sourceRoot":"src/components/page"}]}