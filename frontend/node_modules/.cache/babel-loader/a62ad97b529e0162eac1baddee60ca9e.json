{"remainingRequest":"C:\\Users\\26088\\OneDrive\\Desktop\\校园二手交易平台\\校园二手交易平台\\代码\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\26088\\OneDrive\\Desktop\\校园二手交易平台\\校园二手交易平台\\代码\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\26088\\OneDrive\\Desktop\\校园二手交易平台\\校园二手交易平台\\代码\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\26088\\OneDrive\\Desktop\\校园二手交易平台\\校园二手交易平台\\代码\\frontend\\src\\components\\page\\release.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\26088\\OneDrive\\Desktop\\校园二手交易平台\\校园二手交易平台\\代码\\frontend\\src\\components\\page\\release.vue","mtime":1745557640000},{"path":"C:\\Users\\26088\\OneDrive\\Desktop\\校园二手交易平台\\校园二手交易平台\\代码\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678197338000},{"path":"C:\\Users\\26088\\OneDrive\\Desktop\\校园二手交易平台\\校园二手交易平台\\代码\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1678197338000},{"path":"C:\\Users\\26088\\OneDrive\\Desktop\\校园二手交易平台\\校园二手交易平台\\代码\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678197338000},{"path":"C:\\Users\\26088\\OneDrive\\Desktop\\校园二手交易平台\\校园二手交易平台\\代码\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1678197338000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.replace\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport AppHead from \"../common/AppHeader.vue\";\nimport AppBody from \"../common/AppPageBody.vue\";\nimport AppFoot from \"../common/AppFoot.vue\";\nimport options from \"../common/country-data.js\";\nexport default {\n  name: \"release\",\n  components: {\n    AppHead: AppHead,\n    AppBody: AppBody,\n    AppFoot: AppFoot\n  },\n  data: function data() {\n    return {\n      imgDialogVisible: false,\n      dialogImageUrl: '',\n      showFileList: true,\n      options: options,\n      selectedOptions: [],\n      submitting: false,\n      options2: [{\n        value: 1,\n        label: '数码科技'\n      }, {\n        value: 2,\n        label: '生活用品'\n      }, {\n        value: 3,\n        label: '运动相关'\n      }, {\n        value: 4,\n        label: '图书笔记'\n      }, {\n        value: 5,\n        label: '公告展示'\n      }],\n      imgList: [],\n      idleItemInfo: {\n        idleName: '',\n        idleDetails: '',\n        pictureList: '',\n        idlePrice: 0,\n        idlePlace: '',\n        idleLabel: ''\n      }\n    };\n  },\n  methods: {\n    getCategoryIcon: function getCategoryIcon(categoryId) {\n      var icons = {\n        1: 'el-icon-mobile-phone',\n        2: 'el-icon-box',\n        3: 'el-icon-football',\n        4: 'el-icon-reading',\n        5: 'el-icon-s-flag'\n      };\n      return icons[categoryId] || 'el-icon-goods';\n    },\n    handleChange: function handleChange(value) {\n      console.log(value);\n      this.idleItemInfo.idlePlace = value[1];\n    },\n    fileHandleRemove: function fileHandleRemove(file, fileList) {\n      console.log(file, fileList);\n\n      for (var i = 0; i < this.imgList.length; i++) {\n        if (this.imgList[i] === file.response.data) {\n          this.imgList.splice(i, 1);\n        }\n      }\n    },\n    fileHandlePreview: function fileHandlePreview(file) {\n      console.log(file);\n      this.dialogImageUrl = file.response.data;\n      this.imgDialogVisible = true;\n    },\n    fileHandleSuccess: function fileHandleSuccess(response, file, fileList) {\n      console.log(\"file:\", response, file, fileList);\n      this.imgList.push(response.data);\n    },\n    releaseButton: function releaseButton() {\n      var _this = this;\n\n      // 验证表单\n      if (!this.idleItemInfo.idleName) {\n        this.$message.error('请输入标题！');\n        return;\n      }\n\n      if (!this.idleItemInfo.idleDetails) {\n        this.$message.error('请输入详细描述！');\n        return;\n      }\n\n      if (!this.idleItemInfo.idlePlace) {\n        this.$message.error('请选择您的位置！');\n        return;\n      }\n\n      if (!this.idleItemInfo.idleLabel) {\n        this.$message.error('请选择闲置类别！');\n        return;\n      }\n\n      if (this.idleItemInfo.idleLabel !== 5 && this.idleItemInfo.idlePrice <= 0) {\n        this.$message.error('请设置合理的价格！');\n        return;\n      } // 提交表单\n\n\n      this.submitting = true;\n      this.idleItemInfo.pictureList = JSON.stringify(this.imgList);\n      this.$api.addIdleItem(this.idleItemInfo).then(function (res) {\n        _this.submitting = false;\n\n        if (res.status_code === 1) {\n          _this.$message({\n            message: '发布成功！',\n            type: 'success'\n          });\n\n          console.log(res.data);\n\n          _this.$router.replace({\n            path: '/details',\n            query: {\n              id: res.data.id\n            }\n          });\n        } else {\n          _this.$message.error('发布失败！' + res.msg);\n        }\n      }).catch(function (e) {\n        _this.submitting = false;\n\n        _this.$message.error('网络错误，请稍后重试');\n      });\n    },\n    handleExceed: function handleExceed(files, fileList) {\n      this.$message.warning(\"\\u9650\\u523610\\u5F20\\u56FE\\u7247\\uFF0C\\u672C\\u6B21\\u9009\\u62E9\\u4E86 \".concat(files.length, \" \\u5F20\\u56FE\\uFF0C\\u5171\\u9009\\u62E9\\u4E86 \").concat(files.length + fileList.length, \" \\u5F20\\u56FE\"));\n    },\n    resetForm: function resetForm() {\n      var _this2 = this;\n\n      this.$confirm('确定要重置表单吗？已填写的内容将会丢失', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(function () {\n        _this2.idleItemInfo = {\n          idleName: '',\n          idleDetails: '',\n          pictureList: '',\n          idlePrice: 0,\n          idlePlace: '',\n          idleLabel: ''\n        };\n        _this2.selectedOptions = [];\n        _this2.imgList = [];\n\n        _this2.$message({\n          type: 'success',\n          message: '表单已重置'\n        });\n      }).catch(function () {});\n    }\n  }\n};",{"version":3,"sources":["release.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgLA,OAAA,OAAA;AACA,OAAA,OAAA;AACA,OAAA,OAAA;AACA,OAAA,OAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,SADA;AAEA,EAAA,UAAA,EAAA;AACA,IAAA,OAAA,EAAA,OADA;AAEA,IAAA,OAAA,EAAA,OAFA;AAGA,IAAA,OAAA,EAAA;AAHA,GAFA;AAOA,EAAA,IAPA,kBAOA;AACA,WAAA;AACA,MAAA,gBAAA,EAAA,KADA;AAEA,MAAA,cAAA,EAAA,EAFA;AAGA,MAAA,YAAA,EAAA,IAHA;AAIA,MAAA,OAAA,EAAA,OAJA;AAKA,MAAA,eAAA,EAAA,EALA;AAMA,MAAA,UAAA,EAAA,KANA;AAOA,MAAA,QAAA,EAAA,CAAA;AACA,QAAA,KAAA,EAAA,CADA;AAEA,QAAA,KAAA,EAAA;AAFA,OAAA,EAGA;AACA,QAAA,KAAA,EAAA,CADA;AAEA,QAAA,KAAA,EAAA;AAFA,OAHA,EAMA;AACA,QAAA,KAAA,EAAA,CADA;AAEA,QAAA,KAAA,EAAA;AAFA,OANA,EASA;AACA,QAAA,KAAA,EAAA,CADA;AAEA,QAAA,KAAA,EAAA;AAFA,OATA,EAYA;AACA,QAAA,KAAA,EAAA,CADA;AAEA,QAAA,KAAA,EAAA;AAFA,OAZA,CAPA;AAuBA,MAAA,OAAA,EAAA,EAvBA;AAwBA,MAAA,YAAA,EAAA;AACA,QAAA,QAAA,EAAA,EADA;AAEA,QAAA,WAAA,EAAA,EAFA;AAGA,QAAA,WAAA,EAAA,EAHA;AAIA,QAAA,SAAA,EAAA,CAJA;AAKA,QAAA,SAAA,EAAA,EALA;AAMA,QAAA,SAAA,EAAA;AANA;AAxBA,KAAA;AAiCA,GAzCA;AA0CA,EAAA,OAAA,EAAA;AACA,IAAA,eADA,2BACA,UADA,EACA;AACA,UAAA,KAAA,GAAA;AACA,WAAA,sBADA;AAEA,WAAA,aAFA;AAGA,WAAA,kBAHA;AAIA,WAAA,iBAJA;AAKA,WAAA;AALA,OAAA;AAOA,aAAA,KAAA,CAAA,UAAA,CAAA,IAAA,eAAA;AACA,KAVA;AAWA,IAAA,YAXA,wBAWA,KAXA,EAWA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,KAAA;AACA,WAAA,YAAA,CAAA,SAAA,GAAA,KAAA,CAAA,CAAA,CAAA;AACA,KAdA;AAeA,IAAA,gBAfA,4BAeA,IAfA,EAeA,QAfA,EAeA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,IAAA,EAAA,QAAA;;AACA,WAAA,IAAA,CAAA,GAAA,CAAA,EAAA,CAAA,GAAA,KAAA,OAAA,CAAA,MAAA,EAAA,CAAA,EAAA,EAAA;AACA,YAAA,KAAA,OAAA,CAAA,CAAA,MAAA,IAAA,CAAA,QAAA,CAAA,IAAA,EAAA;AACA,eAAA,OAAA,CAAA,MAAA,CAAA,CAAA,EAAA,CAAA;AACA;AACA;AACA,KAtBA;AAuBA,IAAA,iBAvBA,6BAuBA,IAvBA,EAuBA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,IAAA;AACA,WAAA,cAAA,GAAA,IAAA,CAAA,QAAA,CAAA,IAAA;AACA,WAAA,gBAAA,GAAA,IAAA;AACA,KA3BA;AA4BA,IAAA,iBA5BA,6BA4BA,QA5BA,EA4BA,IA5BA,EA4BA,QA5BA,EA4BA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,OAAA,EAAA,QAAA,EAAA,IAAA,EAAA,QAAA;AACA,WAAA,OAAA,CAAA,IAAA,CAAA,QAAA,CAAA,IAAA;AACA,KA/BA;AAgCA,IAAA,aAhCA,2BAgCA;AAAA;;AACA;AACA,UAAA,CAAA,KAAA,YAAA,CAAA,QAAA,EAAA;AACA,aAAA,QAAA,CAAA,KAAA,CAAA,QAAA;AACA;AACA;;AACA,UAAA,CAAA,KAAA,YAAA,CAAA,WAAA,EAAA;AACA,aAAA,QAAA,CAAA,KAAA,CAAA,UAAA;AACA;AACA;;AACA,UAAA,CAAA,KAAA,YAAA,CAAA,SAAA,EAAA;AACA,aAAA,QAAA,CAAA,KAAA,CAAA,UAAA;AACA;AACA;;AACA,UAAA,CAAA,KAAA,YAAA,CAAA,SAAA,EAAA;AACA,aAAA,QAAA,CAAA,KAAA,CAAA,UAAA;AACA;AACA;;AACA,UAAA,KAAA,YAAA,CAAA,SAAA,KAAA,CAAA,IAAA,KAAA,YAAA,CAAA,SAAA,IAAA,CAAA,EAAA;AACA,aAAA,QAAA,CAAA,KAAA,CAAA,WAAA;AACA;AACA,OArBA,CAuBA;;;AACA,WAAA,UAAA,GAAA,IAAA;AACA,WAAA,YAAA,CAAA,WAAA,GAAA,IAAA,CAAA,SAAA,CAAA,KAAA,OAAA,CAAA;AAEA,WAAA,IAAA,CAAA,WAAA,CAAA,KAAA,YAAA,EAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,QAAA,KAAA,CAAA,UAAA,GAAA,KAAA;;AACA,YAAA,GAAA,CAAA,WAAA,KAAA,CAAA,EAAA;AACA,UAAA,KAAA,CAAA,QAAA,CAAA;AACA,YAAA,OAAA,EAAA,OADA;AAEA,YAAA,IAAA,EAAA;AAFA,WAAA;;AAIA,UAAA,OAAA,CAAA,GAAA,CAAA,GAAA,CAAA,IAAA;;AACA,UAAA,KAAA,CAAA,OAAA,CAAA,OAAA,CAAA;AAAA,YAAA,IAAA,EAAA,UAAA;AAAA,YAAA,KAAA,EAAA;AAAA,cAAA,EAAA,EAAA,GAAA,CAAA,IAAA,CAAA;AAAA;AAAA,WAAA;AACA,SAPA,MAOA;AACA,UAAA,KAAA,CAAA,QAAA,CAAA,KAAA,CAAA,UAAA,GAAA,CAAA,GAAA;AACA;AACA,OAZA,EAYA,KAZA,CAYA,UAAA,CAAA,EAAA;AACA,QAAA,KAAA,CAAA,UAAA,GAAA,KAAA;;AACA,QAAA,KAAA,CAAA,QAAA,CAAA,KAAA,CAAA,YAAA;AACA,OAfA;AAgBA,KA3EA;AA4EA,IAAA,YA5EA,wBA4EA,KA5EA,EA4EA,QA5EA,EA4EA;AACA,WAAA,QAAA,CAAA,OAAA,gFAAA,KAAA,CAAA,MAAA,yDAAA,KAAA,CAAA,MAAA,GAAA,QAAA,CAAA,MAAA;AACA,KA9EA;AA+EA,IAAA,SA/EA,uBA+EA;AAAA;;AACA,WAAA,QAAA,CAAA,qBAAA,EAAA,IAAA,EAAA;AACA,QAAA,iBAAA,EAAA,IADA;AAEA,QAAA,gBAAA,EAAA,IAFA;AAGA,QAAA,IAAA,EAAA;AAHA,OAAA,EAIA,IAJA,CAIA,YAAA;AACA,QAAA,MAAA,CAAA,YAAA,GAAA;AACA,UAAA,QAAA,EAAA,EADA;AAEA,UAAA,WAAA,EAAA,EAFA;AAGA,UAAA,WAAA,EAAA,EAHA;AAIA,UAAA,SAAA,EAAA,CAJA;AAKA,UAAA,SAAA,EAAA,EALA;AAMA,UAAA,SAAA,EAAA;AANA,SAAA;AAQA,QAAA,MAAA,CAAA,eAAA,GAAA,EAAA;AACA,QAAA,MAAA,CAAA,OAAA,GAAA,EAAA;;AACA,QAAA,MAAA,CAAA,QAAA,CAAA;AACA,UAAA,IAAA,EAAA,SADA;AAEA,UAAA,OAAA,EAAA;AAFA,SAAA;AAIA,OAnBA,EAmBA,KAnBA,CAmBA,YAAA,CAAA,CAnBA;AAoBA;AApGA;AA1CA,CAAA","sourcesContent":["<template>\n    <div>\n        <app-head></app-head>\n        <app-body>\n            <div class=\"release-page-container\">\n                <el-card class=\"release-card\" shadow=\"hover\">\n                    <div slot=\"header\" class=\"release-header\">\n                        <h2 class=\"release-title\">\n                            <i class=\"el-icon-upload2\"></i> 发布闲置/公告\n                        </h2>\n                        <p class=\"release-subtitle\">在这里发布您想出售的闲置物品或校园公告</p>\n                    </div>\n                    \n                    <el-form label-position=\"top\" :model=\"idleItemInfo\" class=\"release-form\">\n                        <!-- 基本信息区域 -->\n                        <el-card class=\"form-section\" shadow=\"never\">\n                            <div slot=\"header\" class=\"section-header\">\n                                <i class=\"el-icon-document\"></i> 基本信息\n                            </div>\n                            \n                            <el-form-item label=\"标题\">\n                                <el-input \n                                    placeholder=\"请输入闲置/公告标题（简洁醒目更容易吸引买家）\" \n                                    v-model=\"idleItemInfo.idleName\"\n                                    maxlength=\"30\"\n                                    prefix-icon=\"el-icon-edit\"\n                                    show-word-limit>\n                                </el-input>\n                            </el-form-item>\n                            \n                            <el-form-item label=\"详细描述\">\n                                <el-input\n                                    class=\"release-idle-details\"\n                                    type=\"textarea\"\n                                    :rows=\"4\"\n                                    placeholder=\"请详细描述您的闲置物品状况、新旧程度、购买渠道等信息，或公告的具体内容...\"\n                                    v-model=\"idleItemInfo.idleDetails\"\n                                    maxlength=\"1000\"\n                                    show-word-limit>\n                                </el-input>\n                            </el-form-item>\n                        </el-card>\n                        \n                        <!-- 分类和价格区域 -->\n                        <el-card class=\"form-section\" shadow=\"never\">\n                            <div slot=\"header\" class=\"section-header\">\n                                <i class=\"el-icon-s-grid\"></i> 分类与价格\n                            </div>\n                            \n                            <el-row :gutter=\"20\">\n                                <el-col :span=\"12\">\n                                    <el-form-item label=\"闲置类别\">\n                                        <el-select \n                                            v-model=\"idleItemInfo.idleLabel\" \n                                            placeholder=\"请选择类别\"\n                                            style=\"width: 100%\"\n                                            class=\"category-select\">\n                                            <el-option\n                                                v-for=\"item in options2\"\n                                                :key=\"item.value\"\n                                                :label=\"item.label\"\n                                                :value=\"item.value\">\n                                                <span class=\"category-icon\">\n                                                    <i :class=\"getCategoryIcon(item.value)\"></i>\n                                                </span>\n                                                <span>{{ item.label }}</span>\n                                            </el-option>\n                                        </el-select>\n                                    </el-form-item>\n                                </el-col>\n                                \n                                <el-col :span=\"12\">\n                                    <el-form-item label=\"价格\" v-if=\"idleItemInfo.idleLabel !== 5\">\n                                        <el-input-number \n                                            v-model=\"idleItemInfo.idlePrice\" \n                                            :precision=\"2\" \n                                            :step=\"10\" \n                                            :min=\"0\"\n                                            :max=\"10000000\"\n                                            style=\"width: 100%\"\n                                            class=\"price-input\">\n                                            <template slot=\"prepend\">\n                                                <i class=\"el-icon-price-tag\"></i> ¥\n                                            </template>\n                                        </el-input-number>\n                                    </el-form-item>\n                                    <div v-else class=\"notice-hint\">\n                                        <i class=\"el-icon-info\"></i> 公告类型无需设置价格\n                                    </div>\n                                </el-col>\n                            </el-row>\n                            \n                            <el-form-item label=\"您的位置\">\n                                <el-cascader\n                                    :options=\"options\"\n                                    v-model=\"selectedOptions\"\n                                    @change=\"handleChange\"\n                                    :separator=\"' '\"\n                                    placeholder=\"请选择您的位置，方便买家找到您\"\n                                    style=\"width: 100%;\"\n                                    class=\"location-select\">\n                                </el-cascader>\n                            </el-form-item>\n                        </el-card>\n                        \n                        <!-- 图片上传区域 -->\n                        <el-card class=\"form-section\" shadow=\"never\">\n                            <div slot=\"header\" class=\"section-header\">\n                                <i class=\"el-icon-picture-outline\"></i> 上传照片\n                                <span class=\"upload-tip\">（清晰的照片能提高成交率）</span>\n                            </div>\n                            \n                            <el-upload\n                                action=\"http://localhost:8080/file/\"\n                                :on-preview=\"fileHandlePreview\"\n                                :on-remove=\"fileHandleRemove\"\n                                :on-success=\"fileHandleSuccess\"\n                                :show-file-list=\"showFileList\"\n                                :limit=\"10\"\n                                :on-exceed=\"handleExceed\"\n                                accept=\"image/*\"\n                                drag\n                                multiple\n                                class=\"upload-area\">\n                                <i class=\"el-icon-upload\"></i>\n                                <div class=\"el-upload__text\">拖拽图片到此处，或<em>点击上传</em></div>\n                                <div class=\"el-upload__tip\" slot=\"tip\">支持JPG/PNG等格式，单张不超过5MB，最多10张</div>\n                            </el-upload>\n                            \n                            <div v-if=\"imgList.length > 0\" class=\"image-preview-section\">\n                                <div class=\"preview-title\">已上传 {{imgList.length}} 张图片</div>\n                                <div class=\"image-preview-list\">\n                                    <el-image \n                                        v-for=\"(img, index) in imgList\" \n                                        :key=\"index\"\n                                        :src=\"img\" \n                                        fit=\"cover\"\n                                        class=\"preview-image\"\n                                        :preview-src-list=\"imgList\">\n                                    </el-image>\n                                </div>\n                            </div>\n                            \n                            <el-dialog :visible.sync=\"imgDialogVisible\">\n                                <img width=\"100%\" :src=\"dialogImageUrl\" alt=\"\">\n                            </el-dialog>\n                        </el-card>\n                        \n                        <!-- 提交按钮 -->\n                        <div class=\"submit-section\">\n                            <el-button \n                                type=\"primary\" \n                                round \n                                :icon=\"idleItemInfo.idleLabel === 5 ? 'el-icon-s-flag' : 'el-icon-shopping-bag-1'\"\n                                @click=\"releaseButton\"\n                                :loading=\"submitting\"\n                                class=\"submit-button\">\n                                {{ idleItemInfo.idleLabel === 5 ? '发布公告' : '发布闲置' }}\n                            </el-button>\n                            <el-button \n                                round \n                                icon=\"el-icon-refresh-left\"\n                                @click=\"resetForm\"\n                                class=\"reset-button\">\n                                重置表单\n                            </el-button>\n                        </div>\n                    </el-form>\n                </el-card>\n            </div>\n            <app-foot></app-foot>\n        </app-body>\n    </div>\n</template>\n\n<script>\n    import AppHead from '../common/AppHeader.vue';\n    import AppBody from '../common/AppPageBody.vue'\n    import AppFoot from '../common/AppFoot.vue'\n    import options from '../common/country-data.js'\n\n    export default {\n        name: \"release\",\n        components: {\n            AppHead,\n            AppBody,\n            AppFoot\n        },\n        data() {\n            return {\n                imgDialogVisible: false,\n                dialogImageUrl: '',\n                showFileList: true,\n                options: options,\n                selectedOptions: [],\n                submitting: false,\n                options2: [{\n                    value: 1,\n                    label: '数码科技'\n                }, {\n                    value: 2,\n                    label: '生活用品'\n                }, {\n                    value: 3,\n                    label: '运动相关'\n                }, {\n                    value: 4,\n                    label: '图书笔记'\n                }, {\n                    value: 5,\n                    label: '公告展示'\n                }],\n                imgList: [],\n                idleItemInfo: {\n                    idleName: '',\n                    idleDetails: '',\n                    pictureList: '',\n                    idlePrice: 0,\n                    idlePlace: '',\n                    idleLabel: ''\n                }\n            };\n        },\n        methods: {\n            getCategoryIcon(categoryId) {\n                const icons = {\n                    1: 'el-icon-mobile-phone',\n                    2: 'el-icon-box',\n                    3: 'el-icon-football',\n                    4: 'el-icon-reading',\n                    5: 'el-icon-s-flag'\n                };\n                return icons[categoryId] || 'el-icon-goods';\n            },\n            handleChange(value) {\n                console.log(value);\n                this.idleItemInfo.idlePlace = value[1];\n            },\n            fileHandleRemove(file, fileList) {\n                console.log(file, fileList);\n                for (let i = 0; i < this.imgList.length; i++) {\n                    if (this.imgList[i] === file.response.data) {\n                        this.imgList.splice(i, 1);\n                    }\n                }\n            },\n            fileHandlePreview(file) {\n                console.log(file);\n                this.dialogImageUrl = file.response.data;\n                this.imgDialogVisible = true;\n            },\n            fileHandleSuccess(response, file, fileList) {\n                console.log(\"file:\", response, file, fileList);\n                this.imgList.push(response.data);\n            },\n            releaseButton() {\n                // 验证表单\n                if (!this.idleItemInfo.idleName) {\n                    this.$message.error('请输入标题！');\n                    return;\n                }\n                if (!this.idleItemInfo.idleDetails) {\n                    this.$message.error('请输入详细描述！');\n                    return;\n                }\n                if (!this.idleItemInfo.idlePlace) {\n                    this.$message.error('请选择您的位置！');\n                    return;\n                }\n                if (!this.idleItemInfo.idleLabel) {\n                    this.$message.error('请选择闲置类别！');\n                    return;\n                }\n                if (this.idleItemInfo.idleLabel !== 5 && (this.idleItemInfo.idlePrice <= 0)) {\n                    this.$message.error('请设置合理的价格！');\n                    return;\n                }\n                \n                // 提交表单\n                this.submitting = true;\n                this.idleItemInfo.pictureList = JSON.stringify(this.imgList);\n                \n                this.$api.addIdleItem(this.idleItemInfo).then(res => {\n                    this.submitting = false;\n                    if (res.status_code === 1) {\n                        this.$message({\n                            message: '发布成功！',\n                            type: 'success'\n                        });\n                        console.log(res.data);\n                        this.$router.replace({ path: '/details', query: { id: res.data.id } });\n                    } else {\n                        this.$message.error('发布失败！' + res.msg);\n                    }\n                }).catch(e => {\n                    this.submitting = false;\n                    this.$message.error('网络错误，请稍后重试');\n                });\n            },\n            handleExceed(files, fileList) {\n                this.$message.warning(`限制10张图片，本次选择了 ${files.length} 张图，共选择了 ${files.length + fileList.length} 张图`);\n            },\n            resetForm() {\n                this.$confirm('确定要重置表单吗？已填写的内容将会丢失', '提示', {\n                    confirmButtonText: '确定',\n                    cancelButtonText: '取消',\n                    type: 'warning'\n                }).then(() => {\n                    this.idleItemInfo = {\n                        idleName: '',\n                        idleDetails: '',\n                        pictureList: '',\n                        idlePrice: 0,\n                        idlePlace: '',\n                        idleLabel: ''\n                    };\n                    this.selectedOptions = [];\n                    this.imgList = [];\n                    this.$message({\n                        type: 'success',\n                        message: '表单已重置'\n                    });\n                }).catch(() => {});\n            }\n        }\n    }\n</script>\n\n<style scoped>\n    .release-page-container {\n        min-height: 85vh;\n        padding: 20px;\n        background-color: #f5f7fa;\n    }\n\n    .release-card {\n        max-width: 1000px;\n        margin: 0 auto 40px;\n        border-radius: 8px;\n    }\n    \n    .release-header {\n        text-align: center;\n        padding-bottom: 10px;\n    }\n    \n    .release-title {\n        font-size: 24px;\n        font-weight: 600;\n        color: #303133;\n        margin-bottom: 5px;\n    }\n    \n    .release-subtitle {\n        font-size: 14px;\n        color: #909399;\n        margin: 0;\n    }\n    \n    .release-form {\n        padding: 10px 0;\n    }\n    \n    .form-section {\n        margin-bottom: 20px;\n        border-radius: 4px;\n        border: 1px solid #ebeef5;\n    }\n    \n    .section-header {\n        font-size: 16px;\n        font-weight: 600;\n        color: #409EFF;\n    }\n    \n    .release-idle-details {\n        margin: 10px 0;\n    }\n    \n    .category-select .category-icon {\n        margin-right: 8px;\n        color: #409EFF;\n    }\n    \n    .price-input {\n        width: 100%;\n    }\n    \n    .location-select {\n        width: 100%;\n    }\n    \n    .notice-hint {\n        padding: 20px 0;\n        color: #909399;\n        font-size: 14px;\n    }\n    \n    .upload-tip {\n        font-size: 12px;\n        color: #909399;\n        font-weight: normal;\n        margin-left: 5px;\n    }\n    \n    .upload-area {\n        width: 100%;\n    }\n    \n    .image-preview-section {\n        margin-top: 20px;\n    }\n    \n    .preview-title {\n        margin-bottom: 10px;\n        font-size: 14px;\n        color: #606266;\n    }\n    \n    .image-preview-list {\n        display: flex;\n        flex-wrap: wrap;\n        gap: 10px;\n    }\n    \n    .preview-image {\n        width: 100px;\n        height: 100px;\n        object-fit: cover;\n        border-radius: 4px;\n        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n        transition: all 0.3s;\n    }\n    \n    .preview-image:hover {\n        transform: scale(1.05);\n        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);\n    }\n    \n    .submit-section {\n        display: flex;\n        justify-content: center;\n        margin-top: 30px;\n        gap: 15px;\n    }\n    \n    .submit-button {\n        padding: 12px 30px;\n        font-size: 16px;\n    }\n    \n    .reset-button {\n        padding: 12px 25px;\n    }\n    \n    /* 响应式调整 */\n    @media (max-width: 768px) {\n        .release-page-container {\n            padding: 10px;\n        }\n        \n        .release-form {\n            padding: 0;\n        }\n        \n        .submit-section {\n            flex-direction: column;\n        }\n        \n        .submit-button, .reset-button {\n            width: 100%;\n            margin-bottom: 10px;\n        }\n    }\n</style>"],"sourceRoot":"src/components/page"}]}