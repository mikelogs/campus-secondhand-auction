{"remainingRequest":"E:\\project\\secondhandShop\\leave unused-goods-trading-platform -front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\project\\secondhandShop\\leave unused-goods-trading-platform -front\\src\\components\\page\\alipay.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\project\\secondhandShop\\leave unused-goods-trading-platform -front\\src\\components\\page\\alipay.vue","mtime":1651282796847},{"path":"E:\\project\\secondhandShop\\leave unused-goods-trading-platform -front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1645787918793},{"path":"E:\\project\\secondhandShop\\leave unused-goods-trading-platform -front\\node_modules\\babel-loader\\lib\\index.js","mtime":1645787919664},{"path":"E:\\project\\secondhandShop\\leave unused-goods-trading-platform -front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1645787918793},{"path":"E:\\project\\secondhandShop\\leave unused-goods-trading-platform -front\\node_modules\\vue-loader\\lib\\index.js","mtime":1645787910416}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nimport AppHead from '../common/AppHeader.vue';\nimport AppBody from '../common/AppPageBody.vue'\nimport AppFoot from '../common/AppFoot.vue'\nimport vueQr from 'vue-qr'\n\nexport default {\n    name: \"alipay\",data() {\n\n        return {\n\n            dialogVisible: false,\n\n            text: \"\",\n\n            paySucc: false\n\n        }\n\n    },\n\n    components: {\n\n        vueQr,\n        AppHead,\n        AppBody,\n        AppFoot\n    },\n\n    methods: {\n\n        pay() {\n\n            let _this = this;\n\n            _this.paySucc = false;\n\n            _this.dialogVisible = true;\n\n            this.axios.request(\"http://localhost:8081/createQR\")\n\n                .then((response) => {\n\n                    _this.text = response.data;\n\n                    _this.dialogVisible = true;\n\n                    //使用webSocket发送请求，下面会简单介绍websocket使用\n\n                    if (\"WebSocket\" in window) {\n\n                        // 打开一个 web socket\n\n                        var ws = new WebSocket(\"ws://localhost:8081/bindingRecord\");\n\n                        ws.onopen = function() {\n\n                            // Web Socket 已连接上，使用 send() 方法发送数据\n\n                            // ws.send(\"data\");\n\n                            // alert(\"数据发送中...\");\n\n                        };\n\n                        ws.onmessage = function(evt) {\n\n                            var received_msg = evt.data;\n\n                            // alert(\"数据已接收...\" + evt.data);\n\n                            if (Boolean(evt.data)) {\n\n                                _this.paySucc = true;\n\n                                setTimeout(() => {\n\n                                    _this.dialogVisible = false;\n\n                                }, 3 * 1000);\n\n                            }\n\n                            ws.close();\n\n                        };\n\n                        ws.onclose = function() {\n\n                            // // 关闭 websocket\n\n                            console.log(\"连接已关闭...\");\n\n                        };\n\n                    } else {\n\n                        // 浏览器不支持 WebSocket\n\n                        alert(\"您的浏览器不支持 WebSocket!\");\n\n                    }\n\n                }).catch((err) => {\n\n                console.log(err)\n\n            })\n\n        },\n\n        back(dataUrl, id) {\n\n            console.log(dataUrl, id)\n\n        }\n\n    }\n\n}\n",{"version":3,"sources":["alipay.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAwBA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA","file":"alipay.vue","sourceRoot":"src/components/page","sourcesContent":["<template>\r\n\t<div>\r\n\r\n\t\t<!-- 支付按钮，模拟支付操作 -->\r\n\r\n\t\t<van-button type=\"primary\" @click=\"pay\">支付</van-button>\r\n\r\n\t\t<el-dialog :title=\"paySucc?'支付成功':'扫码支付'\" :visible.sync=\"dialogVisible\" width=\"16%\" center>\r\n\r\n\t\t\t<!-- 生成二维码图片 -->\r\n\r\n\t\t\t<vueQr :text=\"text\" :size=\"200\" v-if=\"!paySucc\"></vueQr>\r\n\r\n\t\t\t<!-- 使用websocket监控是否扫描，扫描成功显示成功并退出界面 -->\r\n\r\n\t\t\t<span class=\"iconfont icon-success\" style=\"position: relative;font-size: 100px;color:#42B983;margin-left: 50px;top:-10px;\" v-else></span>\r\n\r\n\t\t</el-dialog>\r\n\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\r\n    import AppHead from '../common/AppHeader.vue';\r\n    import AppBody from '../common/AppPageBody.vue'\r\n    import AppFoot from '../common/AppFoot.vue'\r\n    import vueQr from 'vue-qr'\r\n\r\n    export default {\r\n        name: \"alipay\",data() {\r\n\r\n            return {\r\n\r\n                dialogVisible: false,\r\n\r\n                text: \"\",\r\n\r\n                paySucc: false\r\n\r\n            }\r\n\r\n        },\r\n\r\n        components: {\r\n\r\n            vueQr,\r\n            AppHead,\r\n            AppBody,\r\n            AppFoot\r\n        },\r\n\r\n        methods: {\r\n\r\n            pay() {\r\n\r\n                let _this = this;\r\n\r\n                _this.paySucc = false;\r\n\r\n                _this.dialogVisible = true;\r\n\r\n                this.axios.request(\"http://localhost:8081/createQR\")\r\n\r\n                    .then((response) => {\r\n\r\n                        _this.text = response.data;\r\n\r\n                        _this.dialogVisible = true;\r\n\r\n                        //使用webSocket发送请求，下面会简单介绍websocket使用\r\n\r\n                        if (\"WebSocket\" in window) {\r\n\r\n                            // 打开一个 web socket\r\n\r\n                            var ws = new WebSocket(\"ws://localhost:8081/bindingRecord\");\r\n\r\n                            ws.onopen = function() {\r\n\r\n                                // Web Socket 已连接上，使用 send() 方法发送数据\r\n\r\n                                // ws.send(\"data\");\r\n\r\n                                // alert(\"数据发送中...\");\r\n\r\n                            };\r\n\r\n                            ws.onmessage = function(evt) {\r\n\r\n                                var received_msg = evt.data;\r\n\r\n                                // alert(\"数据已接收...\" + evt.data);\r\n\r\n                                if (Boolean(evt.data)) {\r\n\r\n                                    _this.paySucc = true;\r\n\r\n                                    setTimeout(() => {\r\n\r\n                                        _this.dialogVisible = false;\r\n\r\n                                    }, 3 * 1000);\r\n\r\n                                }\r\n\r\n                                ws.close();\r\n\r\n                            };\r\n\r\n                            ws.onclose = function() {\r\n\r\n                                // // 关闭 websocket\r\n\r\n                                console.log(\"连接已关闭...\");\r\n\r\n                            };\r\n\r\n                        } else {\r\n\r\n                            // 浏览器不支持 WebSocket\r\n\r\n                            alert(\"您的浏览器不支持 WebSocket!\");\r\n\r\n                        }\r\n\r\n                    }).catch((err) => {\r\n\r\n                    console.log(err)\r\n\r\n                })\r\n\r\n            },\r\n\r\n            back(dataUrl, id) {\r\n\r\n                console.log(dataUrl, id)\r\n\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"]}]}