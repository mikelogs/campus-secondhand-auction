{"remainingRequest":"C:\\Users\\26088\\OneDrive\\Desktop\\校园二手交易平台\\校园二手交易平台\\代码\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\26088\\OneDrive\\Desktop\\校园二手交易平台\\校园二手交易平台\\代码\\frontend\\src\\components\\page\\release.vue?vue&type=style&index=0&id=93bb05d2&scoped=true&lang=css&","dependencies":[{"path":"C:\\Users\\26088\\OneDrive\\Desktop\\校园二手交易平台\\校园二手交易平台\\代码\\frontend\\src\\components\\page\\release.vue","mtime":1745557640000},{"path":"C:\\Users\\26088\\OneDrive\\Desktop\\校园二手交易平台\\校园二手交易平台\\代码\\frontend\\node_modules\\css-loader\\index.js","mtime":1678197338000},{"path":"C:\\Users\\26088\\OneDrive\\Desktop\\校园二手交易平台\\校园二手交易平台\\代码\\frontend\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1678197338000},{"path":"C:\\Users\\26088\\OneDrive\\Desktop\\校园二手交易平台\\校园二手交易平台\\代码\\frontend\\node_modules\\postcss-loader\\src\\index.js","mtime":1678197338000},{"path":"C:\\Users\\26088\\OneDrive\\Desktop\\校园二手交易平台\\校园二手交易平台\\代码\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678197338000},{"path":"C:\\Users\\26088\\OneDrive\\Desktop\\校园二手交易平台\\校园二手交易平台\\代码\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1678197338000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.release-page-container {\n    min-height: 85vh;\n    padding: 20px;\n    background-color: #f5f7fa;\n}\n\n.release-card {\n    max-width: 1000px;\n    margin: 0 auto 40px;\n    border-radius: 8px;\n}\n\n.release-header {\n    text-align: center;\n    padding-bottom: 10px;\n}\n\n.release-title {\n    font-size: 24px;\n    font-weight: 600;\n    color: #303133;\n    margin-bottom: 5px;\n}\n\n.release-subtitle {\n    font-size: 14px;\n    color: #909399;\n    margin: 0;\n}\n\n.release-form {\n    padding: 10px 0;\n}\n\n.form-section {\n    margin-bottom: 20px;\n    border-radius: 4px;\n    border: 1px solid #ebeef5;\n}\n\n.section-header {\n    font-size: 16px;\n    font-weight: 600;\n    color: #409EFF;\n}\n\n.release-idle-details {\n    margin: 10px 0;\n}\n\n.category-select .category-icon {\n    margin-right: 8px;\n    color: #409EFF;\n}\n\n.price-input {\n    width: 100%;\n}\n\n.location-select {\n    width: 100%;\n}\n\n.notice-hint {\n    padding: 20px 0;\n    color: #909399;\n    font-size: 14px;\n}\n\n.upload-tip {\n    font-size: 12px;\n    color: #909399;\n    font-weight: normal;\n    margin-left: 5px;\n}\n\n.upload-area {\n    width: 100%;\n}\n\n.image-preview-section {\n    margin-top: 20px;\n}\n\n.preview-title {\n    margin-bottom: 10px;\n    font-size: 14px;\n    color: #606266;\n}\n\n.image-preview-list {\n    display: flex;\n    flex-wrap: wrap;\n    gap: 10px;\n}\n\n.preview-image {\n    width: 100px;\n    height: 100px;\n    object-fit: cover;\n    border-radius: 4px;\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n    transition: all 0.3s;\n}\n\n.preview-image:hover {\n    transform: scale(1.05);\n    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);\n}\n\n.submit-section {\n    display: flex;\n    justify-content: center;\n    margin-top: 30px;\n    gap: 15px;\n}\n\n.submit-button {\n    padding: 12px 30px;\n    font-size: 16px;\n}\n\n.reset-button {\n    padding: 12px 25px;\n}\n\n/* 响应式调整 */\n@media (max-width: 768px) {\n    .release-page-container {\n        padding: 10px;\n    }\n    \n    .release-form {\n        padding: 0;\n    }\n    \n    .submit-section {\n        flex-direction: column;\n    }\n    \n    .submit-button, .reset-button {\n        width: 100%;\n        margin-bottom: 10px;\n    }\n}\n",{"version":3,"sources":["release.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyUA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"release.vue","sourceRoot":"src/components/page","sourcesContent":["<template>\n    <div>\n        <app-head></app-head>\n        <app-body>\n            <div class=\"release-page-container\">\n                <el-card class=\"release-card\" shadow=\"hover\">\n                    <div slot=\"header\" class=\"release-header\">\n                        <h2 class=\"release-title\">\n                            <i class=\"el-icon-upload2\"></i> 发布闲置/公告\n                        </h2>\n                        <p class=\"release-subtitle\">在这里发布您想出售的闲置物品或校园公告</p>\n                    </div>\n                    \n                    <el-form label-position=\"top\" :model=\"idleItemInfo\" class=\"release-form\">\n                        <!-- 基本信息区域 -->\n                        <el-card class=\"form-section\" shadow=\"never\">\n                            <div slot=\"header\" class=\"section-header\">\n                                <i class=\"el-icon-document\"></i> 基本信息\n                            </div>\n                            \n                            <el-form-item label=\"标题\">\n                                <el-input \n                                    placeholder=\"请输入闲置/公告标题（简洁醒目更容易吸引买家）\" \n                                    v-model=\"idleItemInfo.idleName\"\n                                    maxlength=\"30\"\n                                    prefix-icon=\"el-icon-edit\"\n                                    show-word-limit>\n                                </el-input>\n                            </el-form-item>\n                            \n                            <el-form-item label=\"详细描述\">\n                                <el-input\n                                    class=\"release-idle-details\"\n                                    type=\"textarea\"\n                                    :rows=\"4\"\n                                    placeholder=\"请详细描述您的闲置物品状况、新旧程度、购买渠道等信息，或公告的具体内容...\"\n                                    v-model=\"idleItemInfo.idleDetails\"\n                                    maxlength=\"1000\"\n                                    show-word-limit>\n                                </el-input>\n                            </el-form-item>\n                        </el-card>\n                        \n                        <!-- 分类和价格区域 -->\n                        <el-card class=\"form-section\" shadow=\"never\">\n                            <div slot=\"header\" class=\"section-header\">\n                                <i class=\"el-icon-s-grid\"></i> 分类与价格\n                            </div>\n                            \n                            <el-row :gutter=\"20\">\n                                <el-col :span=\"12\">\n                                    <el-form-item label=\"闲置类别\">\n                                        <el-select \n                                            v-model=\"idleItemInfo.idleLabel\" \n                                            placeholder=\"请选择类别\"\n                                            style=\"width: 100%\"\n                                            class=\"category-select\">\n                                            <el-option\n                                                v-for=\"item in options2\"\n                                                :key=\"item.value\"\n                                                :label=\"item.label\"\n                                                :value=\"item.value\">\n                                                <span class=\"category-icon\">\n                                                    <i :class=\"getCategoryIcon(item.value)\"></i>\n                                                </span>\n                                                <span>{{ item.label }}</span>\n                                            </el-option>\n                                        </el-select>\n                                    </el-form-item>\n                                </el-col>\n                                \n                                <el-col :span=\"12\">\n                                    <el-form-item label=\"价格\" v-if=\"idleItemInfo.idleLabel !== 5\">\n                                        <el-input-number \n                                            v-model=\"idleItemInfo.idlePrice\" \n                                            :precision=\"2\" \n                                            :step=\"10\" \n                                            :min=\"0\"\n                                            :max=\"10000000\"\n                                            style=\"width: 100%\"\n                                            class=\"price-input\">\n                                            <template slot=\"prepend\">\n                                                <i class=\"el-icon-price-tag\"></i> ¥\n                                            </template>\n                                        </el-input-number>\n                                    </el-form-item>\n                                    <div v-else class=\"notice-hint\">\n                                        <i class=\"el-icon-info\"></i> 公告类型无需设置价格\n                                    </div>\n                                </el-col>\n                            </el-row>\n                            \n                            <el-form-item label=\"您的位置\">\n                                <el-cascader\n                                    :options=\"options\"\n                                    v-model=\"selectedOptions\"\n                                    @change=\"handleChange\"\n                                    :separator=\"' '\"\n                                    placeholder=\"请选择您的位置，方便买家找到您\"\n                                    style=\"width: 100%;\"\n                                    class=\"location-select\">\n                                </el-cascader>\n                            </el-form-item>\n                        </el-card>\n                        \n                        <!-- 图片上传区域 -->\n                        <el-card class=\"form-section\" shadow=\"never\">\n                            <div slot=\"header\" class=\"section-header\">\n                                <i class=\"el-icon-picture-outline\"></i> 上传照片\n                                <span class=\"upload-tip\">（清晰的照片能提高成交率）</span>\n                            </div>\n                            \n                            <el-upload\n                                action=\"http://localhost:8080/file/\"\n                                :on-preview=\"fileHandlePreview\"\n                                :on-remove=\"fileHandleRemove\"\n                                :on-success=\"fileHandleSuccess\"\n                                :show-file-list=\"showFileList\"\n                                :limit=\"10\"\n                                :on-exceed=\"handleExceed\"\n                                accept=\"image/*\"\n                                drag\n                                multiple\n                                class=\"upload-area\">\n                                <i class=\"el-icon-upload\"></i>\n                                <div class=\"el-upload__text\">拖拽图片到此处，或<em>点击上传</em></div>\n                                <div class=\"el-upload__tip\" slot=\"tip\">支持JPG/PNG等格式，单张不超过5MB，最多10张</div>\n                            </el-upload>\n                            \n                            <div v-if=\"imgList.length > 0\" class=\"image-preview-section\">\n                                <div class=\"preview-title\">已上传 {{imgList.length}} 张图片</div>\n                                <div class=\"image-preview-list\">\n                                    <el-image \n                                        v-for=\"(img, index) in imgList\" \n                                        :key=\"index\"\n                                        :src=\"img\" \n                                        fit=\"cover\"\n                                        class=\"preview-image\"\n                                        :preview-src-list=\"imgList\">\n                                    </el-image>\n                                </div>\n                            </div>\n                            \n                            <el-dialog :visible.sync=\"imgDialogVisible\">\n                                <img width=\"100%\" :src=\"dialogImageUrl\" alt=\"\">\n                            </el-dialog>\n                        </el-card>\n                        \n                        <!-- 提交按钮 -->\n                        <div class=\"submit-section\">\n                            <el-button \n                                type=\"primary\" \n                                round \n                                :icon=\"idleItemInfo.idleLabel === 5 ? 'el-icon-s-flag' : 'el-icon-shopping-bag-1'\"\n                                @click=\"releaseButton\"\n                                :loading=\"submitting\"\n                                class=\"submit-button\">\n                                {{ idleItemInfo.idleLabel === 5 ? '发布公告' : '发布闲置' }}\n                            </el-button>\n                            <el-button \n                                round \n                                icon=\"el-icon-refresh-left\"\n                                @click=\"resetForm\"\n                                class=\"reset-button\">\n                                重置表单\n                            </el-button>\n                        </div>\n                    </el-form>\n                </el-card>\n            </div>\n            <app-foot></app-foot>\n        </app-body>\n    </div>\n</template>\n\n<script>\n    import AppHead from '../common/AppHeader.vue';\n    import AppBody from '../common/AppPageBody.vue'\n    import AppFoot from '../common/AppFoot.vue'\n    import options from '../common/country-data.js'\n\n    export default {\n        name: \"release\",\n        components: {\n            AppHead,\n            AppBody,\n            AppFoot\n        },\n        data() {\n            return {\n                imgDialogVisible: false,\n                dialogImageUrl: '',\n                showFileList: true,\n                options: options,\n                selectedOptions: [],\n                submitting: false,\n                options2: [{\n                    value: 1,\n                    label: '数码科技'\n                }, {\n                    value: 2,\n                    label: '生活用品'\n                }, {\n                    value: 3,\n                    label: '运动相关'\n                }, {\n                    value: 4,\n                    label: '图书笔记'\n                }, {\n                    value: 5,\n                    label: '公告展示'\n                }],\n                imgList: [],\n                idleItemInfo: {\n                    idleName: '',\n                    idleDetails: '',\n                    pictureList: '',\n                    idlePrice: 0,\n                    idlePlace: '',\n                    idleLabel: ''\n                }\n            };\n        },\n        methods: {\n            getCategoryIcon(categoryId) {\n                const icons = {\n                    1: 'el-icon-mobile-phone',\n                    2: 'el-icon-box',\n                    3: 'el-icon-football',\n                    4: 'el-icon-reading',\n                    5: 'el-icon-s-flag'\n                };\n                return icons[categoryId] || 'el-icon-goods';\n            },\n            handleChange(value) {\n                console.log(value);\n                this.idleItemInfo.idlePlace = value[1];\n            },\n            fileHandleRemove(file, fileList) {\n                console.log(file, fileList);\n                for (let i = 0; i < this.imgList.length; i++) {\n                    if (this.imgList[i] === file.response.data) {\n                        this.imgList.splice(i, 1);\n                    }\n                }\n            },\n            fileHandlePreview(file) {\n                console.log(file);\n                this.dialogImageUrl = file.response.data;\n                this.imgDialogVisible = true;\n            },\n            fileHandleSuccess(response, file, fileList) {\n                console.log(\"file:\", response, file, fileList);\n                this.imgList.push(response.data);\n            },\n            releaseButton() {\n                // 验证表单\n                if (!this.idleItemInfo.idleName) {\n                    this.$message.error('请输入标题！');\n                    return;\n                }\n                if (!this.idleItemInfo.idleDetails) {\n                    this.$message.error('请输入详细描述！');\n                    return;\n                }\n                if (!this.idleItemInfo.idlePlace) {\n                    this.$message.error('请选择您的位置！');\n                    return;\n                }\n                if (!this.idleItemInfo.idleLabel) {\n                    this.$message.error('请选择闲置类别！');\n                    return;\n                }\n                if (this.idleItemInfo.idleLabel !== 5 && (this.idleItemInfo.idlePrice <= 0)) {\n                    this.$message.error('请设置合理的价格！');\n                    return;\n                }\n                \n                // 提交表单\n                this.submitting = true;\n                this.idleItemInfo.pictureList = JSON.stringify(this.imgList);\n                \n                this.$api.addIdleItem(this.idleItemInfo).then(res => {\n                    this.submitting = false;\n                    if (res.status_code === 1) {\n                        this.$message({\n                            message: '发布成功！',\n                            type: 'success'\n                        });\n                        console.log(res.data);\n                        this.$router.replace({ path: '/details', query: { id: res.data.id } });\n                    } else {\n                        this.$message.error('发布失败！' + res.msg);\n                    }\n                }).catch(e => {\n                    this.submitting = false;\n                    this.$message.error('网络错误，请稍后重试');\n                });\n            },\n            handleExceed(files, fileList) {\n                this.$message.warning(`限制10张图片，本次选择了 ${files.length} 张图，共选择了 ${files.length + fileList.length} 张图`);\n            },\n            resetForm() {\n                this.$confirm('确定要重置表单吗？已填写的内容将会丢失', '提示', {\n                    confirmButtonText: '确定',\n                    cancelButtonText: '取消',\n                    type: 'warning'\n                }).then(() => {\n                    this.idleItemInfo = {\n                        idleName: '',\n                        idleDetails: '',\n                        pictureList: '',\n                        idlePrice: 0,\n                        idlePlace: '',\n                        idleLabel: ''\n                    };\n                    this.selectedOptions = [];\n                    this.imgList = [];\n                    this.$message({\n                        type: 'success',\n                        message: '表单已重置'\n                    });\n                }).catch(() => {});\n            }\n        }\n    }\n</script>\n\n<style scoped>\n    .release-page-container {\n        min-height: 85vh;\n        padding: 20px;\n        background-color: #f5f7fa;\n    }\n\n    .release-card {\n        max-width: 1000px;\n        margin: 0 auto 40px;\n        border-radius: 8px;\n    }\n    \n    .release-header {\n        text-align: center;\n        padding-bottom: 10px;\n    }\n    \n    .release-title {\n        font-size: 24px;\n        font-weight: 600;\n        color: #303133;\n        margin-bottom: 5px;\n    }\n    \n    .release-subtitle {\n        font-size: 14px;\n        color: #909399;\n        margin: 0;\n    }\n    \n    .release-form {\n        padding: 10px 0;\n    }\n    \n    .form-section {\n        margin-bottom: 20px;\n        border-radius: 4px;\n        border: 1px solid #ebeef5;\n    }\n    \n    .section-header {\n        font-size: 16px;\n        font-weight: 600;\n        color: #409EFF;\n    }\n    \n    .release-idle-details {\n        margin: 10px 0;\n    }\n    \n    .category-select .category-icon {\n        margin-right: 8px;\n        color: #409EFF;\n    }\n    \n    .price-input {\n        width: 100%;\n    }\n    \n    .location-select {\n        width: 100%;\n    }\n    \n    .notice-hint {\n        padding: 20px 0;\n        color: #909399;\n        font-size: 14px;\n    }\n    \n    .upload-tip {\n        font-size: 12px;\n        color: #909399;\n        font-weight: normal;\n        margin-left: 5px;\n    }\n    \n    .upload-area {\n        width: 100%;\n    }\n    \n    .image-preview-section {\n        margin-top: 20px;\n    }\n    \n    .preview-title {\n        margin-bottom: 10px;\n        font-size: 14px;\n        color: #606266;\n    }\n    \n    .image-preview-list {\n        display: flex;\n        flex-wrap: wrap;\n        gap: 10px;\n    }\n    \n    .preview-image {\n        width: 100px;\n        height: 100px;\n        object-fit: cover;\n        border-radius: 4px;\n        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n        transition: all 0.3s;\n    }\n    \n    .preview-image:hover {\n        transform: scale(1.05);\n        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);\n    }\n    \n    .submit-section {\n        display: flex;\n        justify-content: center;\n        margin-top: 30px;\n        gap: 15px;\n    }\n    \n    .submit-button {\n        padding: 12px 30px;\n        font-size: 16px;\n    }\n    \n    .reset-button {\n        padding: 12px 25px;\n    }\n    \n    /* 响应式调整 */\n    @media (max-width: 768px) {\n        .release-page-container {\n            padding: 10px;\n        }\n        \n        .release-form {\n            padding: 0;\n        }\n        \n        .submit-section {\n            flex-direction: column;\n        }\n        \n        .submit-button, .reset-button {\n            width: 100%;\n            margin-bottom: 10px;\n        }\n    }\n</style>"]}]}