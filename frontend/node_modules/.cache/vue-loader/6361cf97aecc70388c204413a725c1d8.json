{"remainingRequest":"C:\\Users\\26088\\OneDrive\\Desktop\\校园二手交易平台\\校园二手交易平台\\代码\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\26088\\OneDrive\\Desktop\\校园二手交易平台\\校园二手交易平台\\代码\\frontend\\src\\components\\common\\IdleGoods.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\26088\\OneDrive\\Desktop\\校园二手交易平台\\校园二手交易平台\\代码\\frontend\\src\\components\\common\\IdleGoods.vue","mtime":1745551718000},{"path":"C:\\Users\\26088\\OneDrive\\Desktop\\校园二手交易平台\\校园二手交易平台\\代码\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678197338000},{"path":"C:\\Users\\26088\\OneDrive\\Desktop\\校园二手交易平台\\校园二手交易平台\\代码\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1678197338000},{"path":"C:\\Users\\26088\\OneDrive\\Desktop\\校园二手交易平台\\校园二手交易平台\\代码\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678197338000},{"path":"C:\\Users\\26088\\OneDrive\\Desktop\\校园二手交易平台\\校园二手交易平台\\代码\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1678197338000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n    name: \"IdleGoods\",\n    data() {\n        return {\n            activeTab: \"1\",\n            mode: 1,\n            nowPage: 1,\n            total: 0,\n            onlineGoods: [],\n            OfflineGoods: [],\n            findValue: '',\n            status: 1,\n            tableLoading: false\n        }\n    },\n    created() {\n        this.getOnlineGoods();\n    },\n    methods: {\n        handleTabClick(tab) {\n            this.mode = parseInt(tab.name);\n            this.status = parseInt(tab.name);\n            this.nowPage = 1;\n            \n            if (this.mode === 1) {\n                this.getOnlineGoods();\n            } else {\n                this.getOfflineGoods();\n            }\n        },\n        searchIdle(){\n            this.tableLoading = true;\n            this.$api.queryIdle({\n                findValue: this.findValue,\n                page: this.nowPage,\n                nums: 8,\n                status: this.status\n            }).then(res => {\n                this.tableLoading = false;\n                if (res.status_code == 1 && res.data.list != null) {\n                    if(res.data.list[0].idleStatus == 1){\n                        this.onlineGoods = res.data.list;\n                        this.total = res.data.count;\n                    } else {\n                        this.OfflineGoods = res.data.list;\n                        this.total = res.data.count;\n                    }\n                } else{\n                    this.$message.error(res.msg)\n                }\n            }).catch(e => {\n                this.tableLoading = false;\n                console.log(e)\n            })\n        },\n        handleCurrentChange(val) {\n            this.nowPage = val;\n            if (this.mode == 1) {\n                this.getOnlineGoods();\n            }\n            if (this.mode == 2) {\n                this.getOfflineGoods();\n            }\n        },\n        handleSelect(val) {\n            if (this.mode !== val) {\n                this.mode = val;\n                if (val == 1) {\n                    this.nowPage = 1;\n                    this.getOnlineGoods();\n                }\n                if (val == 2) {\n                    this.nowPage = 1;\n                    this.getOfflineGoods();\n                }\n            }\n        },\n        confirmOfflineGoods(index, row) {\n            this.$confirm('确定要将该闲置商品下架吗？', '提示', {\n                confirmButtonText: '确定',\n                cancelButtonText: '取消',\n                type: 'warning'\n            }).then(() => {\n                this.makeOfflineGoods(index);\n            }).catch(() => {\n                this.$message({\n                    type: 'info',\n                    message: '已取消下架'\n                });          \n            });\n        },\n        confirmDeleteGoods(index, row) {\n            this.$confirm('此操作将永久删除该商品, 是否继续?', '提示', {\n                confirmButtonText: '确定',\n                cancelButtonText: '取消',\n                type: 'warning'\n            }).then(() => {\n                this.deleteGoods(index);\n            }).catch(() => {\n                this.$message({\n                    type: 'info',\n                    message: '已取消删除'\n                });          \n            });\n        },\n        makeOfflineGoods(i) {\n            this.tableLoading = true;\n            this.$api.updateGoods({\n                id: this.onlineGoods[i].id,\n                status: 2\n            }).then(res => {\n                this.tableLoading = false;\n                if (res.status_code == 1) {\n                    this.$message.success('商品已成功下架');\n                    this.getOnlineGoods();\n                } else {\n                    this.$message.error(res.msg)\n                }\n            }).catch(e => {\n                this.tableLoading = false;\n                console.log(e)\n            })\n        },\n        deleteGoods(i) {\n            this.tableLoading = true;\n            this.$api.updateGoods({\n                id: this.OfflineGoods[i].id,\n                status: 0\n            }).then(res => {\n                this.tableLoading = false;\n                if (res.status_code == 1) {\n                    this.$message.success('商品已永久删除');\n                    this.getOfflineGoods();\n                } else {\n                    this.$message.error(res.msg)\n                }\n            }).catch(e => {\n                this.tableLoading = false;\n                console.log(e)\n            })\n        },\n        getOnlineGoods() {\n            this.tableLoading = true;\n            this.$api.getGoods({\n                status: 1,\n                page: this.nowPage,\n                nums: 8\n            }).then(res => {\n                this.tableLoading = false;\n                if (res.status_code == 1) {\n                    this.onlineGoods = res.data.list;\n                    this.total = res.data.count;\n                } else {\n                    this.$message.error(res.msg)\n                }\n            }).catch(e => {\n                this.tableLoading = false;\n                console.log(e)\n            })\n        },\n        getOfflineGoods() {\n            this.tableLoading = true;\n            this.$api.getGoods({\n                status: 2,\n                page: this.nowPage,\n                nums: 8\n            }).then(res => {\n                this.tableLoading = false;\n                if (res.status_code == 1) {\n                    this.OfflineGoods = res.data.list;\n                    this.total = res.data.count;\n                } else {\n                    this.$message.error(res.msg)\n                }\n            }).catch(e => {\n                this.tableLoading = false;\n                console.log(e)\n            })\n        }\n    }\n}\n",{"version":3,"sources":["IdleGoods.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"IdleGoods.vue","sourceRoot":"src/components/common","sourcesContent":["<template>\n\t<div class=\"main-border\">\n\t\t<div class=\"page-header\">\n\t\t\t<h2 class=\"page-title\">闲置商品管理</h2>\n\t\t\t<div class=\"search-container\">\n\t\t\t\t<el-input \n\t\t\t\t\tplaceholder=\"搜索闲置名称...\" \n\t\t\t\t\tv-model=\"findValue\" \n\t\t\t\t\t@keyup.enter.native=\"searchIdle\"\n\t\t\t\t\tprefix-icon=\"el-icon-search\"\n\t\t\t\t\tclearable\n\t\t\t\t\tclass=\"search-input\">\n\t\t\t\t\t<el-button slot=\"append\" icon=\"el-icon-search\" @click=\"searchIdle\">搜索</el-button>\n\t\t\t\t</el-input>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<el-tabs v-model=\"activeTab\" @tab-click=\"handleTabClick\" type=\"card\" class=\"custom-tabs\">\n\t\t\t<el-tab-pane label=\"上线的闲置\" name=\"1\">\n\t\t\t\t<div class=\"table-container\">\n\t\t\t\t\t<el-table\n\t\t\t\t\t\t:data=\"onlineGoods\"\n\t\t\t\t\t\tstripe\n\t\t\t\t\t\tstyle=\"width: 100%\"\n\t\t\t\t\t\t:header-cell-style=\"{ background: '#f5f7fa', color: '#303133', fontWeight: 'bold' }\"\n\t\t\t\t\t\tborder\n\t\t\t\t\t\tv-loading=\"tableLoading\">\n\t\t\t\t\t\t<el-table-column prop=\"releaseTime\" label=\"发布日期\" width=\"180\"></el-table-column>\n\t\t\t\t\t\t<el-table-column prop=\"idleName\" label=\"闲置名称\" show-overflow-tooltip></el-table-column>\n\t\t\t\t\t\t<el-table-column prop=\"user.nickname\" label=\"发布用户\" min-width=\"100\" width=\"120\"></el-table-column>\n\t\t\t\t\t\t<el-table-column prop=\"idlePrice\" label=\"价格\" min-width=\"100\" width=\"100\">\n\t\t\t\t\t\t\t<template slot-scope=\"scope\">\n\t\t\t\t\t\t\t\t<span class=\"price-tag\">¥{{ scope.row.idlePrice }}</span>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</el-table-column>\n\t\t\t\t\t\t<el-table-column label=\"操作\" width=\"120\" align=\"center\">\n\t\t\t\t\t\t\t<template slot-scope=\"scope\">\n\t\t\t\t\t\t\t\t<el-button\n\t\t\t\t\t\t\t\t\tsize=\"mini\"\n\t\t\t\t\t\t\t\t\ttype=\"danger\"\n\t\t\t\t\t\t\t\t\ticon=\"el-icon-delete\"\n\t\t\t\t\t\t\t\t\t@click=\"confirmOfflineGoods(scope.$index, scope.row)\"\n\t\t\t\t\t\t\t\t\tround>\n\t\t\t\t\t\t\t\t\t违规下架\n\t\t\t\t\t\t\t\t</el-button>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</el-table-column>\n\t\t\t\t\t</el-table>\n\t\t\t\t</div>\n\t\t\t</el-tab-pane>\n\t\t\t\n\t\t\t<el-tab-pane label=\"下架的闲置\" name=\"2\">\n\t\t\t\t<div class=\"table-container\">\n\t\t\t\t\t<el-table\n\t\t\t\t\t\t:data=\"OfflineGoods\"\n\t\t\t\t\t\tstripe\n\t\t\t\t\t\tstyle=\"width: 100%\"\n\t\t\t\t\t\t:header-cell-style=\"{ background: '#f5f7fa', color: '#303133', fontWeight: 'bold' }\"\n\t\t\t\t\t\tborder\n\t\t\t\t\t\tv-loading=\"tableLoading\">\n\t\t\t\t\t\t<el-table-column prop=\"releaseTime\" label=\"发布日期\" width=\"180\"></el-table-column>\n\t\t\t\t\t\t<el-table-column prop=\"idleName\" label=\"闲置名称\" show-overflow-tooltip></el-table-column>\n\t\t\t\t\t\t<el-table-column prop=\"user.nickname\" label=\"发布用户\" min-width=\"100\" width=\"120\"></el-table-column>\n\t\t\t\t\t\t<el-table-column prop=\"idlePrice\" label=\"价格\" min-width=\"100\" width=\"100\">\n\t\t\t\t\t\t\t<template slot-scope=\"scope\">\n\t\t\t\t\t\t\t\t<span class=\"price-tag\">¥{{ scope.row.idlePrice }}</span>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</el-table-column>\n\t\t\t\t\t\t<el-table-column label=\"操作\" width=\"120\" align=\"center\">\n\t\t\t\t\t\t\t<template slot-scope=\"scope\">\n\t\t\t\t\t\t\t\t<el-button\n\t\t\t\t\t\t\t\t\tsize=\"mini\"\n\t\t\t\t\t\t\t\t\ttype=\"danger\"\n\t\t\t\t\t\t\t\t\ticon=\"el-icon-delete\"\n\t\t\t\t\t\t\t\t\t@click=\"confirmDeleteGoods(scope.$index, scope.row)\"\n\t\t\t\t\t\t\t\t\tround>\n\t\t\t\t\t\t\t\t\t永久删除\n\t\t\t\t\t\t\t\t</el-button>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</el-table-column>\n\t\t\t\t\t</el-table>\n\t\t\t\t</div>\n\t\t\t</el-tab-pane>\n\t\t</el-tabs>\n\n\t\t<div class=\"pagination-container\">\n\t\t\t<el-pagination\n\t\t\t\t@current-change=\"handleCurrentChange\"\n\t\t\t\t:current-page.sync=\"nowPage\"\n\t\t\t\t:page-size=\"8\"\n\t\t\t\tbackground\n\t\t\t\tlayout=\"total, prev, pager, next, jumper\"\n\t\t\t\t:total=\"total\">\n\t\t\t</el-pagination>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\n    export default {\n        name: \"IdleGoods\",\n        data() {\n            return {\n                activeTab: \"1\",\n                mode: 1,\n                nowPage: 1,\n                total: 0,\n                onlineGoods: [],\n                OfflineGoods: [],\n                findValue: '',\n                status: 1,\n                tableLoading: false\n            }\n        },\n        created() {\n            this.getOnlineGoods();\n        },\n        methods: {\n            handleTabClick(tab) {\n                this.mode = parseInt(tab.name);\n                this.status = parseInt(tab.name);\n                this.nowPage = 1;\n                \n                if (this.mode === 1) {\n                    this.getOnlineGoods();\n                } else {\n                    this.getOfflineGoods();\n                }\n            },\n            searchIdle(){\n                this.tableLoading = true;\n                this.$api.queryIdle({\n                    findValue: this.findValue,\n                    page: this.nowPage,\n                    nums: 8,\n                    status: this.status\n                }).then(res => {\n                    this.tableLoading = false;\n                    if (res.status_code == 1 && res.data.list != null) {\n                        if(res.data.list[0].idleStatus == 1){\n                            this.onlineGoods = res.data.list;\n                            this.total = res.data.count;\n                        } else {\n                            this.OfflineGoods = res.data.list;\n                            this.total = res.data.count;\n                        }\n                    } else{\n                        this.$message.error(res.msg)\n                    }\n                }).catch(e => {\n                    this.tableLoading = false;\n                    console.log(e)\n                })\n            },\n            handleCurrentChange(val) {\n                this.nowPage = val;\n                if (this.mode == 1) {\n                    this.getOnlineGoods();\n                }\n                if (this.mode == 2) {\n                    this.getOfflineGoods();\n                }\n            },\n            handleSelect(val) {\n                if (this.mode !== val) {\n                    this.mode = val;\n                    if (val == 1) {\n                        this.nowPage = 1;\n                        this.getOnlineGoods();\n                    }\n                    if (val == 2) {\n                        this.nowPage = 1;\n                        this.getOfflineGoods();\n                    }\n                }\n            },\n            confirmOfflineGoods(index, row) {\n                this.$confirm('确定要将该闲置商品下架吗？', '提示', {\n                    confirmButtonText: '确定',\n                    cancelButtonText: '取消',\n                    type: 'warning'\n                }).then(() => {\n                    this.makeOfflineGoods(index);\n                }).catch(() => {\n                    this.$message({\n                        type: 'info',\n                        message: '已取消下架'\n                    });          \n                });\n            },\n            confirmDeleteGoods(index, row) {\n                this.$confirm('此操作将永久删除该商品, 是否继续?', '提示', {\n                    confirmButtonText: '确定',\n                    cancelButtonText: '取消',\n                    type: 'warning'\n                }).then(() => {\n                    this.deleteGoods(index);\n                }).catch(() => {\n                    this.$message({\n                        type: 'info',\n                        message: '已取消删除'\n                    });          \n                });\n            },\n            makeOfflineGoods(i) {\n                this.tableLoading = true;\n                this.$api.updateGoods({\n                    id: this.onlineGoods[i].id,\n                    status: 2\n                }).then(res => {\n                    this.tableLoading = false;\n                    if (res.status_code == 1) {\n                        this.$message.success('商品已成功下架');\n                        this.getOnlineGoods();\n                    } else {\n                        this.$message.error(res.msg)\n                    }\n                }).catch(e => {\n                    this.tableLoading = false;\n                    console.log(e)\n                })\n            },\n            deleteGoods(i) {\n                this.tableLoading = true;\n                this.$api.updateGoods({\n                    id: this.OfflineGoods[i].id,\n                    status: 0\n                }).then(res => {\n                    this.tableLoading = false;\n                    if (res.status_code == 1) {\n                        this.$message.success('商品已永久删除');\n                        this.getOfflineGoods();\n                    } else {\n                        this.$message.error(res.msg)\n                    }\n                }).catch(e => {\n                    this.tableLoading = false;\n                    console.log(e)\n                })\n            },\n            getOnlineGoods() {\n                this.tableLoading = true;\n                this.$api.getGoods({\n                    status: 1,\n                    page: this.nowPage,\n                    nums: 8\n                }).then(res => {\n                    this.tableLoading = false;\n                    if (res.status_code == 1) {\n                        this.onlineGoods = res.data.list;\n                        this.total = res.data.count;\n                    } else {\n                        this.$message.error(res.msg)\n                    }\n                }).catch(e => {\n                    this.tableLoading = false;\n                    console.log(e)\n                })\n            },\n            getOfflineGoods() {\n                this.tableLoading = true;\n                this.$api.getGoods({\n                    status: 2,\n                    page: this.nowPage,\n                    nums: 8\n                }).then(res => {\n                    this.tableLoading = false;\n                    if (res.status_code == 1) {\n                        this.OfflineGoods = res.data.list;\n                        this.total = res.data.count;\n                    } else {\n                        this.$message.error(res.msg)\n                    }\n                }).catch(e => {\n                    this.tableLoading = false;\n                    console.log(e)\n                })\n            }\n        }\n    }\n</script>\n\n<style scoped>\n\t.main-border {\n\t\tbackground-color: #fff;\n\t\tmargin: 20px;\n\t\tpadding: 25px;\n\t\tbox-shadow: 0 4px 18px rgba(0, 0, 0, 0.08);\n\t\tborder-radius: 10px;\n\t\theight: calc(100% - 40px);\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t}\n\n\t.page-header {\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: center;\n\t\tmargin-bottom: 25px;\n\t\tborder-bottom: 1px solid #ebeef5;\n\t\tpadding-bottom: 15px;\n\t}\n\n\t.page-title {\n\t\tfont-size: 20px;\n\t\tfont-weight: 600;\n\t\tcolor: #303133;\n\t\tmargin: 0;\n\t}\n\n\t.search-container {\n\t\twidth: 350px;\n\t}\n\n\t.search-input {\n\t\twidth: 100%;\n\t}\n\n\t.search-input >>> .el-input__inner {\n\t\tborder-radius: 20px 0 0 20px;\n\t\tborder-right: none;\n\t}\n\n\t.search-input >>> .el-input-group__append {\n\t\tborder-radius: 0 20px 20px 0;\n\t\tbackground-color: #409EFF;\n\t\tborder-color: #409EFF;\n\t\tcolor: white;\n\t}\n\n\t.search-input >>> .el-input-group__append .el-button {\n\t\tcolor: white;\n\t\tborder: none;\n\t}\n\n\t.custom-tabs >>> .el-tabs__header {\n\t\tmargin-bottom: 20px;\n\t}\n\n\t.custom-tabs >>> .el-tabs__item {\n\t\tfont-size: 15px;\n\t\tpadding: 0 25px;\n\t\theight: 40px;\n\t\tline-height: 40px;\n\t}\n\n\t.custom-tabs >>> .el-tabs__item.is-active {\n\t\tcolor: #409EFF;\n\t\tfont-weight: bold;\n\t}\n\n\t.table-container {\n\t\tmargin-bottom: 20px;\n\t\tflex: 1;\n\t}\n\n\t.el-table {\n\t\tborder-radius: 6px;\n\t\toverflow: hidden;\n\t}\n\n\t.price-tag {\n\t\tcolor: #ff6b6b;\n\t\tfont-weight: bold;\n\t}\n\n\t.pagination-container {\n\t\tmargin-top: 20px;\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t}\n\n\t.el-button--danger {\n\t\tbackground-color: #ff6b6b;\n\t\tborder-color: #ff6b6b;\n\t}\n\n\t.el-button--danger:hover, .el-button--danger:focus {\n\t\tbackground-color: #ff8c8c;\n\t\tborder-color: #ff8c8c;\n\t}\n\n\t/* 加载状态样式 */\n\t.el-loading-mask {\n\t\tbackground-color: rgba(255, 255, 255, 0.8);\n\t}\n\n\t/* 响应式调整 */\n\t@media screen and (max-width: 768px) {\n\t\t.page-header {\n\t\t\tflex-direction: column;\n\t\t\talign-items: flex-start;\n\t\t}\n\n\t\t.search-container {\n\t\t\twidth: 100%;\n\t\t\tmargin-top: 15px;\n\t\t}\n\n\t\t.main-border {\n\t\t\tpadding: 15px;\n\t\t\tmargin: 10px;\n\t\t}\n\t}\n</style>"]}]}